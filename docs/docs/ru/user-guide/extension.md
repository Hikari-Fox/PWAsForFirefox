# Руководство по расширению

Расширение браузера упрощает установку и управление прогрессивными веб-приложениями непосредственно
из вашей основной установки Firefox. Оно поддерживает установку PWA всего за несколько кликов,
управление и запуск их, а также создание и управление профилями непосредственно из браузера.

## Быстрый старт

### Настройка

Когда расширение установлено, оно автоматически откроет новую вкладку с инструкциями
по настройке проекта. Это включает принятие лицензионного соглашения, установку
нативной программы и установку среды выполнения. Инструкции предоставляются в виде
легко следуемого мастера. После завершения процесса вы можете начать использовать расширение.

### Установка веб-приложения

Когда веб-сайт является действительным PWA (загружен по HTTPS и имеет связанный манифест веб-приложения),
опция установки автоматически появится в адресной строке (если не отключена в настройках
расширения). Нажатие на неё откроет всплывающее меню, из которого вы можете установить
веб-приложение.

Если веб-сайт не является действительным PWA, действие установки не появится (если не включено
в настройках расширения). Однако вы всё равно можете установить такие веб-сайты, используя
действие браузера расширения. Этот метод не требует манифеста веб-приложения и может быть использован для любого веб-сайта.

!!! tip

    Если установка не удалась из-за ошибки, связанной с манифестом, вы можете попробовать отключить
    использование манифеста для определения свойств приложения и установить его снова.

    Некоторые веб-сайты не могут быть установлены, потому что они используют недействительные манифесты. Мы ведём
    [список таких веб-сайтов](../resources/specific-website-tips.md#websites-with-invalid-manifests).

!!! warning

    Вы не можете повторно использовать одно и то же имя для нескольких веб-приложений, потому что новые могут перезаписать
    записи меню для существующих веб-приложений. Вам также следует быть осторожным, чтобы не повторно использовать имя
    существующего нативного приложения, так как оно также может перезаписать его запись меню.

    Вы не можете установить несколько экземпляров одного и того же веб-приложения в одном профиле,
    потому что они фактически будут одним и тем же экземпляром. Вместо этого установите каждый экземпляр
    в отдельный профиль.

### Запуск веб-приложения

Когда вы открываете веб-сайт, который уже был установлен, действие запуска появится
в вашей адресной строке. Когда вы нажимаете на него, появится всплывающее окно, где вы можете запустить
существующие экземпляры веб-приложения или создать новый.

Вы также можете запустить веб-приложение через меню запуска/приложений системы или из списка веб-приложений
в действии браузера расширения.

## Управление профилями

Веб-приложения используют отдельную систему профилей, отличную от обычного Firefox, поэтому данные, такие как установленные
расширения, пароли, логины и т. д., не делятся с вашим обычным профилем браузера. Это
используется для повышения надёыжности веб-приложений и позволяет дополнительную настройку. Если вы хотите
синхронизировать данные между вашим основным и веб-профилем, рекомендуется использовать учётную запись Firefox
или стороннее решение для синхронизации.

По умолчанию веб-приложения устанавливаются в общий «дефолтный» профиль. Вы также можете создать
отдельные изолированные профили и установить веб-приложения там, что позволяет вам устанавливать
несколько экземпляров одного и того же веб-приложения с разными учётными записями. При установке нового
веб-приложения у вас также есть возможность автоматически создать новый профиль только для него.

Все профили можно получить и управлять ими через вкладку «профили» в расширении. Вы
можете ознакомиться со [списком доступных свойств и настроек профиля](../resources/profile-properties.md).

Если указана опция шаблона, всё содержимое предоставленного каталога шаблона будет
скопировано во вновь созданный профиль. Это полезно, если вы хотите создать новый профиль
с теми же расширениями, настройками и т. д., что и существующий. Если опция шаблона
не указана, новый профиль будет использовать [дефолтный шаблон](#default-profile-template),
который можно установить в настройках расширения.

Шаблон также может быть дополнительно применен позже при редактировании профиля.

!!! tip

    Если вы хотите использовать существующий профиль в качестве шаблона, убедитесь, что он не запущен
    перед копированием в качестве шаблона. В противном случае он будет содержать файлы блокировки, которые могут вызвать
    ошибки при создании или запуске профиля из шаблона. Вы можете проверить [ЧАВО](../help/faq.md#why-cant-i-create-a-profile-when-using-template)
    для получения дополнительных деталей.

## Управление веб-приложениями

Установленные веб-приложения можно просматривать и управлять ими на вкладке «веб-приложения» в расширении.
Это позволяет вам запускать, редактировать и удалять веб-приложения.

При редактировании веб-приложения вы можете изменить его свойства, такие как название, описание и
иконка. Если не отключено, редактирование веб-приложения также обновляет его манифест и иконку, а также
повторно применяет системную интеграцию. Вы также можете ознакомиться со [списком доступных свойств и настроек веб-приложения](../resources/web-app-properties.md).

Редактирование веб-приложения позволяет вам изменить, какие из поддерживаемых обработчиков протоколов вы хотите
включить. По умолчанию все обработчики протоколов, указанные в манифесте веб-приложения, отключены. Некоторые
веб-сайты также динамически регистрируют обработчики протоколов; они включаются автоматически, если вы принимаете
запрос Firefox.

Вы также можете настроить, когда веб-приложение [будет запускаться автоматически](../resources/web-app-properties.md#auto-launch-settings).

## Настройки расширения

### Отображать виджет адресной строки

Когда установлено «При действительных прогрессивных веб-приложениях» (по умолчанию), виджет адресной строки будет отображаться только
когда текущий веб-сайт является действительным PWA (загружен по HTTPS и имеет связанный
манифест веб-приложения). Другие два варианта говорят сами за себя.

### Запускать веб-приложения на активных URL-адресах

Если включено (по умолчанию), при запуске из виджета адресной строки веб-приложение будет
запущено на текущем URL-адресе. Если отключено, веб-приложение будет запущено на
стандартном URL-адресе запуска.

### Показывать всплывающее окно при обновлениях расширения

Если включено (по умолчанию), уведомление будет отображаться, когда расширение обновляется.

### Включить автоматический запуск веб-приложений

Если включено, все URL-адреса, которые соответствуют областям ваших включённых веб-приложений, будут автоматически
запускаться как веб-приложение.

!!! warning

    Эта функция является экспериментальной, может не работать со всеми веб-сайтами корректно
    и может повлиять на производительность.

Эта опция должна быть дополнительно включена для каждого веб-приложения в его настройках, используя [флажок «Запускать
это веб-приложение на соответствующем веб-сайте»](../resources/web-app-properties.md#launch-this-web-app-on-matching-website).
Конкретные URL-адреса также могут быть исключены из автоматического запуска внутри веб-приложений с
[опцией регулярного выражения исключения](#automatic-launching-exclusion).

Дополнительные разрешения браузера необходимы для работы этой опции. Они будут запрашиваться
автоматически после включения опции, если они ещё не разрешены.

### Всегда патчить среду выполнения и профиль

Если включено, среда выполнения и профиль будут патчиться каждый раз, когда веб-приложение запускается.
Если отключено (по умолчанию), они будут патчиться только при выходе новой версии.

Эта опция не применяется к macOS, потому что патчинг всегда требуется на этой платформе.

### Использовать сервер отображения Wayland (только Linux)

Если включено, среда выполнения Firefox будет проинструктирована использовать сервер отображения Wayland.
Это эквивалентно установке переменной окружения `MOZ_ENABLE_WAYLAND` в `1`.

### Использовать X Input Extension 2 (только Linux)

Если включено, среда выполнения Firefox будет проинструктирована использовать X Input Extension 2.
Это эквивалентно установке переменной окружения `MOZ_USE_XINPUT2` в `1`.

### Использовать XDG Desktop Portals (только Linux)

Если включено, среда выполнения Firefox будет проинструктирована использовать XDG Desktop Portals.
Это эквивалентно установке переменной окружения `GTK_USE_PORTAL` в `1`.

### Стандартный шаблон профиля

Если указано, предоставленный каталог будет использоваться в качестве шаблона профиля при создании
всех новых профилей, если другой каталог шаблона явно не установлен при создании
профиля.

Всё содержимое предоставленного каталога шаблона будет скопировано в вновь созданный профиль.

### Исключение автоматического запуска

Если указано, любые URL-адреса, которые соответствуют предоставленному регулярному выражению, будут исключены
из автоматического запуска веб-приложения (не будут автоматически открываться внутри веб-приложения). Это может быть полезно,
когда веб-сайт имеет собственные «URL-адреса перенаправления», которые вы не хотите открывать в веб-приложении.
Эта опция имеет эффект только когда [автоматический запуск веб-приложений](#enable-automatic-web-app-launching)
включен.

### Язык

Расширение переведено на несколько языков. Вы можете выбрать, какой из них хотите использовать.

!!! warning

    Переводы поддерживаются сообществом и могут быть неполными или неправильными.

    Вы можете помочь улучшить их на [Crowdin](https://crowdin.com/project/firefoxpwa).

### Обновить веб-приложения

Это загрузит и разберёт манифесты для всех ваших веб-приложений и зарегистрирует их снова в
операционных системах. Любые изменения в манифестах веб-приложений также будут отражены в вашей
системе.

В качестве альтернативы вы можете зарегистрировать все веб-приложения в операционной системе без выполнения
обновлений манифеста. Это может быть использовано, если вы перенесли свой конфигурационный файл с другого
устройства.

### Пропатчить профили и среду выполнения

Это пропатчит все профили и среду выполнения с текущей глобально установленной версией
патчей.

Это полезно после (пере)установки пользовательской среды выполнения или если у вас возникают
проблемы с запуском веб-приложений.

### Переустановить среду выполнения

Это удалит вашу текущую среду выполнения и загрузит последнюю версию с сайта Mozilla.
Это также заменит любую пользовательскую среду выполнения, которую вы вручную скачали.

Это не повлияет на ваш основной браузер Firefox и не удалит никаких профилей или данных.

!!! warning

    Эта опция может не работать на всех платформах, которые поддерживает PWAsForFirefox, так как Firefox
    не предоставляет предварительно собранные пакеты для некоторых платформ, и автоматическая установка
    для некоторых платформ слишком сложна для реализации. Для этих платформ вам нужно будет
    вручную (пере)установить среду выполнения.
